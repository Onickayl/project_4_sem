# Осень

*Симуляция осеннего изменения листьев*

## О проекте

Проект представляет собой симуляцию деревьев осенью, как погода влияет на цвет и опадание листьев. Каждый лист — это независимый объект со своими параметрами, а дерево — связанная структура для транспорта веществ.

Цвет каждого листа обусловлен наличием природных веществ, которые вырабатываются и накапливаются в нем. Цвет листа определяют три вещества:
1. Зеленый цвет обусловлен хлорофиллом, который преобразует солнечный свет и воду в сахар. Молекулы хлорофилла разрушаются и не восстанавливаются при чрезмерном воздействии солнечного света и низких температурах. Таким образом, в холодные солнечные осенние дни общая концентрация хлорофилла снижается. Общая концентрация хлорофилла снова повышается при наличии солнечного света (но не слишком яркого) и воды.
2. Желтый цвет обусловлен пигментами под названием каротиноиды. Концентрация каротиноидов остается неизменной на протяжении всей жизни листа, но перекрывается зелёным цветом хлорофилла. Лист, в котором много хлорофилла (что характерно для лета), будет исключительно зеленым, но по мере разрушения хлорофилла становится заметены каротиноиды, и лист желтеет.
3. Красный цвет обусловлен пигментами под названием антоцианы. Молекулы антоцианов образуются в присутствии большого количества сахара и воды в листе. (Чем выше концентрация сахара, тем больше образуется антоцианов.) Концентрация сахара повышается, когда из-за холодной погоды дерево прекращает циркуляцию воды в стволе. Вода и сахар, которые задерживаются в листе, превращаются в антоцианы. (много света и температура около нуля)

Вода поступает от дождя, впитывается корнями (они на земле) и поднимается по стволу к веткам и листьям. У листьев в модели есть атрибут «прилипчивость», который показывает, насколько сильно лист цепляется за дерево. Прилипчивость повышается при наличии влаги и снижается при ветре и дожде.

## Основные возможности:
1. Моделирование дерева с множеством листьев
2. Интерактивное управление погодой (солнце, температура, дождь, ветер)
3. Возможность задавать начальные условия (например, положение дерева относительно реки или градиент освещенности по кроне)
4. Проведение серий экспериментов с автоматическим изменением параметров
5. Визуализация процесса в реальном времени
6. Сохранение и загрузка параметров погоды в текстовый файл
7. Сбор и экспорт статистики для построения многомерных графиков

## Функциональность

### Интерактивное управление погодой
Пользователь может в реальном времени изменять параметры окружающей среды:
- Яркость солнца (0-100%) — влияет на скорость разрушения хлорофилла
- Температура (-10°C до +30°C) — при похолодании листья меняют цвет быстрее
- Интенсивность дождя (0-100%) — добавляет влагу листьям, повышает "прилипчивость"
- Фактор ветра (0-100%) — раскачивает и сдувает листья

### Моделирование листа
Каждый лист — объект с параметрами:
- Уровни пигментов: хлорофилл (зеленый), каротиноиды (желтый), антоцианы (красный)
- Содержание воды и сахара
- Координаты на дереве
- Прилипчивость (0-100%)
- Флаг "жив/упал"

### Визуализация (SFML)
- Графическое окно с плавной анимацией (60 кадров/сек)
- Листья отображаются как кружки с изменяющимся цветом:
  - Зеленый (хлорофилл > 70%)
  - Желтый (40-70%)
  - Красный (0-40%)
- Дерево с ветками (линии и прямоугольники)
- Земля: зеленая полоса внизу, на ней опавшие листья
- Облака/солнце: кружочки белые/жёлтое
- Дождь: много-много синих линий (капли), падающих сверху вниз
- Информационная панель с текущими параметрами и статистикой
- Анимация падающих листьев

### Экспериментальная часть
Главная цель проекта — не просто симуляция, а исследование поведения модели в разных условиях. Для этого предусмотрена возможность проведения серий экспериментов, например, влияние реки или находится ли дерево на возвышенности. Результаты каждого эксперимента сохраняются и могут быть проанализированы с помощью 3D-графиков или 4D-графиков. Это позволяет наглядно увидеть, как комбинации факторов влияют на состояние дерева, и выявить скрытые закономерности.

### Сохранение данных
- Автоматическое сохранение параметров погоды в файл `weather.txt`
- Возможность загрузить ранее сохраненный "сезон"
- Экспорт статистики по листьям в CSV для дальнейшего анализа и построения графиков

## Почему C++ и SFML?

### C++:
1. Объектно-ориентированный подход идеально подходит для моделирования листьев как объектов
2. Богатая стандартная библиотека с готовыми структурами данных
3. Высокая производительность для симуляции тысяч объектов
4. Автоматическое управление памятью (RAII) предотвращает утечки
5. Широкая распространённость 

### SFML:
1. Простой и понятный
2. Специализация на 2D графике
3. Аппаратное ускорение

## Идеи дальнейшего развития
1. Можно добавить циклы смены дня и ночи, во время которых температура падает, а солнце садится на несколько тактов. В темноте дерево будет потреблять сахар и вырабатывать воду в процессе дыхания.
2. Можно добавить появление почек и рост новых листьев.

## Вдохновление: 
Модель [Autumn](https://ccl.northwestern.edu/netlogo/models/Autumn) из библиотеки NetLogo.
